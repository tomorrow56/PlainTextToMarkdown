# AI搭載 テキスト → Markdown 変換ツール

これは、OpenAI APIの能力を活用して、プレーンテキストファイルを構造化されたMarkdown形式に変換するWebアプリケーションです。

APIの制限に達したり、文脈を見失ったりすることなく、非常に長いドキュメントでも変換できるように、コンテンツを管理可能なチャンク（塊）にインテリジェントに分割し、それらを順次処理して再結合することで、大規模なテキストファイルを扱えるように設計されています。

## ✨ 主な機能

- **AIによる変換**: OpenAIの`gpt-3.5-turbo`モデルを活用し、原文の文脈と構造を理解して、適切なMarkdownフォーマットを適用します。
- **大規模ファイル対応**: テキストを固定文字数ではなく段落で分割する「インテリジェント・チャンキング」機能を実装。これにより文脈を保持し、あらゆるサイズのファイルに対応します。
- **リアルタイム進捗表示**: 変換処理の進捗状況（処理済みのチャンク数）を表示します。これは特に大きなファイルの場合に便利です。
- **シンプルなUI**: ファイルをアップロードし、OpenAI APIキーを入力して変換を開始するための、クリーンなユーザーインターフェース。
- **ダウンロード可能な出力**: 変換が完了すると、生成されたMarkdownを`.md`ファイルとしてダウンロードできます。
- **クライアントサイド処理**: OpenAIへのAPI呼び出しを含むすべての処理は、ユーザーのブラウザで直接行われます。APIキーがOpenAI以外のサーバーに保存・送信されることはありません。

## 🚀 使い方

1.  **ローカルで実行**: `index.html`ファイルをモダンなWebブラウザで開きます。最適な体験のためには、ローカルWebサーバーを使用してファイルを提供してください。
    ```bash
    # Python 3がインストールされている場合
    python3 -m http.server
    ```
    その後、ブラウザで `http://localhost:8000` にアクセスします。

2.  **ファイルをアップロード**: ファイル入力ボタンをクリックし、変換したいプレーンテキスト（`.txt`）ファイルを選択します。

3.  **APIキーを入力**: OpenAI APIキーを指定のフィールドに入力します。[OpenAI Platform](https://platform.openai.com/account/api-keys) からキーを取得できます。

4.  **変換**: 「AIで変換する」ボタンをクリックします。このボタンは、ファイルが選択され、APIキーが入力された後にのみ有効になります。

5.  **進捗を確認**: アプリケーションがファイルの各チャンクを処理する間、進捗テキストを確認します。

6.  **ダウンロード**: 処理が完了すると、結果がテキストエリアに表示され、ダウンロードボタンが有効になります。クリックしてMarkdownファイルを保存します。

## 🛠️ 使用技術

- **フロントエンド**: HTML5, CSS3, Vanilla JavaScript (ES6+)
- **AI**: OpenAI API (`v1/chat/completions` エンドポイント)

## 🧠 中核となる実装：インテリジェント・チャンキング

AIモデルのトークン制限を克服するため、このアプリケーションでは「インテリジェント・チャンキング」戦略を採用しています。

1.  入力テキストは、まず空行に基づいて段落に分割されます。
2.  次に、これらの段落は、事前に定義された文字数制限（現在の実装では`1500`文字）を超えないようにチャンクにグループ化されます。
3.  この方法により、文章の途中でテキストが分割されるのを防ぎ、AIに送信される各チャンクの文脈的な完全性が保たれます。
4.  AIには、これらのチャンクをより大きなドキュメントの一部として扱うための特定のルールが指示され、ファイル全体で一貫したフォーマットと正確な見出し検出が保証されます。
